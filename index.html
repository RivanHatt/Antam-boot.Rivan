<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antam Boot System - BUMN</title>
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #112240;
            --accent: #64ffda;
            --gold: #f1c40f;
            --danger: #ff4d4d;
            --text-main: #ccd6f6;
            --bg: #0a192f;
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: var(--text-main); font-size: 14px; }
        .hidden { display: none !important; }

        /* HEADER */
        .header { background: #ffffff; padding: 15px; text-align: center; border-bottom: 5px solid var(--gold); color: #333; }
        .logo-box { font-size: 22px; font-weight: bold; }
        .bumn-tag { background: #003399; color: white; padding: 2px 6px; font-size: 10px; border-radius: 4px; }

        /* NAV */
        .nav-tabs { display: flex; background: var(--secondary); overflow-x: auto; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--accent); }
        .nav-tabs button { flex: 1; padding: 15px; border: none; background: none; color: white; cursor: pointer; white-space: nowrap; font-size: 12px; font-weight: bold; }
        .nav-tabs button.active { border-bottom: 3px solid var(--accent); color: var(--accent); }

        /* CARDS */
        .card { background: var(--secondary); padding: 15px; border-radius: 10px; margin: 10px; border: 1px solid rgba(100,255,218,0.1); box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        input, select, textarea { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #233554; border-radius: 5px; background: #0a192f; color: white; box-sizing: border-box; }
        
        .btn { padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 5px; transition: 0.3s; }
        .btn-accent { background: var(--accent); color: #0a192f; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-copy { background: #3498db; color: white; font-size: 11px; width: auto; padding: 5px 10px; margin-left: 10px; }

        /* CONSOLE */
        #console { background: #000; color: #0f0; padding: 10px; border-radius: 5px; height: 180px; overflow-y: auto; font-family: monospace; font-size: 11px; border: 1px solid var(--accent); line-height: 1.5; }
        
        /* TABLE */
        .scroll-x { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; margin-top: 10px; }
        th, td { border: 1px solid #233554; padding: 10px; text-align: left; }
        th { background: #1d2d50; color: var(--accent); }

        .timer { font-size: 24px; font-weight: bold; color: var(--danger); text-align: center; margin: 10px 0; border: 1px dashed var(--danger); padding: 5px; border-radius: 5px; }
        .footer { text-align: center; font-size: 10px; padding: 15px; color: #8892b0; letter-spacing: 1px; }
    </style>
</head>
<body>

<div class="header">
    <div class="logo-box">‚õ∞Ô∏è‚õ∞Ô∏è‚õ∞Ô∏è ANTAM BOOT SYSTEM <span class="bumn-tag">BUMN</span></div>
    
    <div id="realtime-clock" style="font-family: monospace; font-weight: bold; color: #1a252f; margin-top: 5px; font-size: 16px;">00:00:00</div>
    <div id="realtime-date" style="font-size: 11px; color: #666;">Memuat tanggal...</div>
    <div style="font-size: 10px; color: #666; font-style: italic;">Rivan hatt by system anonymous</div>
</div>

<div id="page-login">
    <div class="card" style="max-width: 400px; margin: 50px auto; text-align: center;">
        <h2 style="color:var(--accent)">System Activation</h2>
        <p style="font-size:12px;">Masukkan Key Lisensi untuk akses Dashboard</p>
        <input type="text" id="mainKey" placeholder="LICENSE KEY">
        <button class="btn btn-accent" onclick="auth()">MASUK KE PANEL</button>
        <a href="https://wa.me/6283854178752" style="color:var(--accent); display:block; margin-top:15px; text-decoration:none; font-size:12px;">Belum punya Key? Chat Admin</a>
    </div>
</div>

<div id="page-user" class="hidden">
    <div class="nav-tabs">
        <button onclick="utab('u-dash',this)" class="unav active">WAR BOOT</button>
        <button onclick="utab('u-acc',this)" class="unav">PROFIL</button>
        <button onclick="utab('u-lic',this)" class="unav">BELI LISENSI</button>
        <button onclick="location.reload()" style="color:var(--danger)">LOGOUT</button>
    </div>

    <div id="u-dash" class="utab-content">
        <div class="card">
            <h3>üöÄ Antam Console</h3>
            <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:10px;">
                <span>Lisensi: <b id="u-lic-stat" style="color:var(--gold)">Free</b></span>
                <span>Limit Input: <b id="u-limit-view">1</b></span>
            </div>
            <label style="font-size:11px; color:var(--accent)">Data Masal (Format: Nama|NIK|WA|Email):</label>
            <textarea id="massInput" rows="5" placeholder="Budi|1604xxx|0812xxx|budi@mail.com"></textarea>
            <label>Jadwal Mulai:</label>
            <input type="time" id="startTime">
            <div id="console">> System Ready. Masukkan data dan klik Start.</div>
            <button class="btn btn-accent" id="btnRun" onclick="runBoot()">MULAI AUTO BOOT (MULTI-TAB)</button>
        </div>
        <div id="u-res" class="card hidden">
            <h4 style="color:var(--accent)">‚úÖ Antrian Berhasil</h4>
            <div id="u-res-list" style="display:grid; grid-template-columns:1fr 1fr; gap:8px;"></div>
        </div>
    </div>

    <div id="u-acc" class="utab-content hidden">
        <div class="card">
            <h3>Pengaturan Akun</h3>
            <label>Nama Akun:</label><input type="text" id="u-name" placeholder="Nama Lengkap">
            <label>Gmail:</label><input type="email" id="u-mail" placeholder="contoh@gmail.com">
            <button class="btn btn-accent" onclick="saveAcc()">SIMPAN PERUBAHAN</button>
        </div>
    </div>

    <div id="u-lic" class="utab-content hidden">
        <div id="lic-shop-container"></div>
        <div id="pay-modal" class="card hidden" style="border: 2px solid var(--gold); text-align: center;">
            <h3 style="color:var(--gold)">üí∞ Instruksi Pembayaran</h3>
            <div class="timer" id="pay-timer">05:00</div>
            <div style="background:#0a192f; padding:15px; border-radius:8px; margin:10px 0; border:1px solid #233554;">
                <span id="pay-bank">BCA</span>: <b id="pay-num">883521xxx</b> 
                <button class="btn-copy" onclick="copyRek()">SALIN</button>
            </div>
            <p>Total: <b id="pay-total" style="color:var(--accent)">Rp 0</b></p>
            <button class="btn btn-accent" onclick="confirmPay()">SAYA SUDAH BAYAR</button>
            <button class="btn" onclick="location.reload()">Batalkan</button>
        </div>
    </div>
</div>

<script>
    // --- DATABASE 3 PRODUK ---
    let products = JSON.parse(localStorage.getItem('ant_p')) || [
        {name:'Basic', price:150000, limit:5},
        {name:'Pro', price:350000, limit:15},
        {name:'Ultimate', price:750000, limit:30}
    ];
    let admin_rek = JSON.parse(localStorage.getItem('ant_r')) || {bank:'BCA', num:'883521xxx', name:'Rivan Admin'};
    let user_profile = {name:'User Aktif', lic:'Free', limit:1};
    let timerInter;

    function auth() {
        const k = document.getElementById('mainKey').value.toUpperCase();
        if(k === 'ADMIN') { window.location.reload(); /* Admin logic can be added */ }
        else { 
            const found = products.find(p => p.name.toUpperCase() === k);
            user_profile.lic = k;
            user_profile.limit = found ? found.limit : 1;
            document.getElementById('u-lic-stat').innerText = user_profile.lic;
            document.getElementById('u-limit-view').innerText = user_profile.limit;
            show('page-user'); 
            renderUserShop(); 
        }
    }

    function show(id) { document.getElementById('page-login').classList.add('hidden'); document.getElementById(id).classList.remove('hidden'); }
    function utab(id,b) {
        document.querySelectorAll('.utab-content').forEach(c=>c.classList.add('hidden'));
        document.querySelectorAll('.unav').forEach(n=>n.classList.remove('active'));
        document.getElementById(id).classList.remove('hidden'); b.classList.add('active');
    }

    function renderUserShop() {
        const div = document.getElementById('lic-shop-container'); 
        div.innerHTML = '<h3>Daftar Lisensi Resmi</h3>';
        products.forEach(p => {
            div.innerHTML += `<div class="card">
                <h4>${p.name} License</h4>
                <p>Limit: <b>${p.limit} Data</b></p>
                <p style="color:var(--accent); font-size:18px;">Rp ${p.price.toLocaleString()}</p>
                <button class="btn btn-accent" onclick="openPay('${p.name}', ${p.price})">BELI SEKARANG</button>
            </div>`;
        });
    }

    // --- CORE BOOT LOGIC (PARALLEL 30 TAB) ---
    async function runBoot() {
        const input = document.getElementById('massInput').value.trim();
        if(!input) return alert("Data masih kosong!");
        const lines = input.split('\n');
        
        if(lines.length > user_profile.limit) {
            return alert(`Limit lisensi ${user_profile.lic} hanya ${user_profile.limit} data!`);
        }

        const log = document.getElementById('console');
        document.getElementById('btnRun').disabled = true;

        for(let i=0; i<lines.length; i++) {
            const [nama, nik, wa, email] = lines[i].split('|');
            
            // Kirim Perintah ke Tab ID sesuai urutan (0, 1, 2... 29)
            localStorage.setItem(`antam_cmd_${i}`, 'FIRE');
            localStorage.setItem(`antam_nik_${i}`, nik);
            localStorage.setItem(`antam_nama_${i}`, nama);
            localStorage.setItem(`antam_wa_${i}`, wa || '08123456789');
            localStorage.setItem(`antam_mail_${i}`, email || 'user@gmail.com');

            log.innerHTML += `<br>[${new Date().toLocaleTimeString()}] üöÄ Tab ${i} Terpemicu: ${nama}`;
            log.scrollTop = log.scrollHeight;
            
            // Jeda 1 detik antar trigger supaya tidak crash
            await new Promise(r => setTimeout(r, 1000));
            addRes(nama, i);
        }
        
        log.innerHTML += `<br><span style="color:var(--accent)">[Selesai] Semua sinyal terkirim ke 30 Tab!</span>`;
        document.getElementById('btnRun').disabled = false;
    }

    function addRes(n, i) {
        document.getElementById('u-res').classList.remove('hidden');
        document.getElementById('u-res-list').innerHTML += `<div class="card" style="font-size:10px; margin:2px;"><b>${n}</b><br>Sent to Tab ${i}</div>`;
    }

    function updateClock() {
        const now = new Date();
        const h = String(now.getHours()).padStart(2, '0');
        const m = String(now.getMinutes()).padStart(2, '0');
        const s = String(now.getSeconds()).padStart(2, '0');
        document.getElementById('realtime-clock').innerText = `${h}:${m}:${s}`;
        document.getElementById('realtime-date').innerText = now.toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

        const userStartTime = document.getElementById('startTime').value;
        if (userStartTime === `${h}:${m}` && s === "00" && !document.getElementById('btnRun').disabled) {
            runBoot(); 
        }
    }
    setInterval(updateClock, 1000);
</script>
</body>
</html>
